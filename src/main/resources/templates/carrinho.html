<!DOCTYPE html>
  <html lang="pt-BR"
        th:replace="~{fragments/layout :: layout(~{::head} , ~{::main})}"
        xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{fragments/head :: head(~{})}"></head>

<main class="container mt-4">

  <h2 class="mb4">Carrinho de Compras</h2>

  <div th:if="${carrinhos.itens.isEmpty()}">
    <div class="alert alert-warning" role="alert">
      Seu carrinho esta vazio!
    </div>
  </div>
  <div th:if="${!carrinhos.itens.isEmpty()}">
    <table class="table table-striped table-hover">
      <thead>
      <th>
        <tr>Produto</tr>
        <tr>Quantidade</tr>
        <tr>Preço unitario</tr>
        <tr>Preço total</tr>
        <tr>Ações</tr>
      </th>
      </thead>
      <tbody>
        <tr th:each="item, itemStat : ${carrinhos.itens}">
          <td th:text="${item.produto.nome}"></td>
          <td>
            <div class="quantity-widget" th:data-produto-id="${item.produto.id}">
              <div class="input-group" style="width: 120px;">
                  <button class="btn btn-outline-secondary btn-sm quantity-minus">-</button>
                  <input type="text" class="form-control text-center quantity" th:value="${item.quantidade}" readonly />
                  <button class="btn btn-outline-secondary btn-sm quantity-plus">+</button>
              </div>
            </div>
          </td>
          <td th:text="${#numbers.formatCurrency(item.produto.preco)}"/>
          <td th:text="${#numbers.formatCurrency(item.produto.preco * item.quantidade)}"/>
          <td>
            <a th:href="@{'/produtos/remover-do-carrinho/' + ${item.produto.id}}" class="btn btn-danger btn-sm remove-from-card">Remover</a>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="d-flex justify-content-end mt-4">
      <div class="text-end">
        <h4>Total: <span class="text-warning" th:text="${#numbers.formatCurrency(carrinho.valorTotal)}"></span> </h4>
        <a href="/vendas/finalizar" class="btn btn-primary mt-3">Finalizar Compra</a>
      </div>
    </div>
  </div>
  <a href="/produtos" class="btn btn-secondary mt-3"> Continuar Comprando</a>
</main>

</html>